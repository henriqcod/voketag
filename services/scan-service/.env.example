# Scan Service - Environment variables
# Copy to .env and fill in values.

# Server
ENV=development
PORT=8080
READ_TIMEOUT=5
WRITE_TIMEOUT=10
SHUTDOWN_TIMEOUT=10
CONTEXT_TIMEOUT=5

# Database (PostgreSQL)
DATABASE_URL=postgresql://voketag:voketag@localhost:5432/voketag?sslmode=disable
PG_MAX_CONNS=20
PG_MIN_CONNS=5

# Redis
REDIS_ADDR=localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TIMEOUT_MS=100
REDIS_POOL_SIZE=100
REDIS_MIN_IDLE_CONNS=10
REDIS_MAX_CONN_AGE_MIN=5
REDIS_POOL_TIMEOUT_SEC=1
REDIS_IDLE_TIMEOUT_SEC=30
REDIS_IDLE_CHECK_FREQ_SEC=60

# Antifraud
ANTIFRAUD_ENABLED=true
ANTIFRAUD_MAX_SCANS_PER_HOUR=1000
ANTIFRAUD_BLOCK_THRESHOLD=100
# Token signing for /api/verify (HMAC-SHA256) - must match factory/scan token generation
ANTIFRAUD_TOKEN_SECRET=change-me-in-production
ANTIFRAUD_TOKEN_TTL_SECONDS=86400

# Rate limiting
RATE_LIMIT_IP_PER_MINUTE=100
RATE_LIMIT_KEY_PER_MINUTE=1000
RATE_LIMIT_FAIL_CLOSED=true
CLOUD_RUN_REGION=default
GCP_REGION=default

# Pub/Sub (optional)
GCP_PROJECT_ID=
PUBSUB_TOPIC_SCAN_EVENTS=scan-events

# OpenTelemetry
OTEL_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# Optional: Datadog
DD_ENV=
DD_AGENT_HOST=

# Optional: region for logging
REGION=
